Tile tile1 = $1;

Int n = 6;

Tile subtile1 = subtile(tile1, (0,0), n);
Tile subtile2 = subtile(tile1, (2,2), n);
Tile subtile3 = subtile(tile1, (4,4), n);
Tile output = newTile(3 * n); // 18

for (j in 3) {
        for (i in 3) {
            if (j == 1) {
                output <- placeTile(subtile1, output, n, 0, if (i == 1) { 0 } else { if (i == 2) { 6 } else { 12 } })
        } else {
                if (j == 2) {
                    output <- placeTile(subtile2, output, n, 6, if (i == 1) { 0 } else { if (i == 2) { 6 } else { 12 } })
            } else {
                    output <- placeTile(subtile3, output, n, 12, if (i == 1) { 0 } else { if (i == 2) { 6 } else { 12 } })
            }
        }
    }
};

export(output)